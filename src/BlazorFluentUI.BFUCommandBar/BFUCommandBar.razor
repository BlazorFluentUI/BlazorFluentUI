@namespace BlazorFluentUI
@inherits BFUComponentBase

<BFUGlobalCS Component="this" CreateGlobalCss=@(()=>CreateGlobalCss(Theme)) />

<BFUResizeGroup OnGrowData=@onGrowData OnReduceData=@onReduceData
             Data=@_currentData
             GetCacheKey=@(x => x.CacheKey)
             ClassName=@ClassName
             Style=@Style>
    <DataTemplate Context="data">
        <div class="mediumFont ms-CommandBar" role="menubar">
            @*Primary*@
            <BFUOverflowSet ClassName="ms-CommandBar-primarySet" Items=@data.PrimaryItems OverflowItems=@(data.OverflowItems.Count() > 0 ? data.OverflowItems : null) GetKey=@(x=>x.Key)>
                <ItemTemplate>
                    @if (context.IconOnly)
                    {
                        <BFUTooltipHost>
                            <ChildContent>
                                <BFUCommandBarButton IconName=@context.IconName Text=@(!context.IconOnly ? context.Text : null)
                                                     MenuItems=@context.Items
                                                  OnClick=@(args => context.OnClick?.Invoke(new ItemClickedArgs() { MouseEventArgs = args, Key = context.Key }))
                                                  Command=@context.Command CommandParameter=@context.CommandParameter
                                                  Disabled=@context.Disabled AriaLabel=@context.AriaLabel Checked=@context.Checked ClassName=@context.ClassName
                                                  Split=@context.Split Style=@context.Style />
                            </ChildContent>
                            <TooltipContent>
                                @context.Text
                            </TooltipContent>
                        </BFUTooltipHost>
                    }
                    else
                    {
                        <BFUCommandBarButton IconName=@context.IconName Text=@(!context.IconOnly ? context.Text : null)
                                             MenuItems=@context.Items
                                          OnClick=@(args => context.OnClick?.Invoke(new ItemClickedArgs() { MouseEventArgs = args, Key = context.Key }))
                                          Command=@context.Command CommandParameter=@context.CommandParameter
                                          Disabled=@context.Disabled AriaLabel=@context.AriaLabel Checked=@context.Checked ClassName=@context.ClassName
                                          Split=@context.Split Style=@context.Style />
                    }
                </ItemTemplate>
                <OverflowTemplate>
                    <BFUCommandBarButton HideChevron="true" Style="min-width: 0; padding: 0 4px; align-self: stretch;" IconName="More" MenuItems=@context />
                </OverflowTemplate>

            </BFUOverflowSet>
            @*Secondary*@
            <BFUOverflowSet ClassName="ms-CommandBar-secondarySet" Items=@data.FarItems GetKey=@(x=>x.Key)>
                <ItemTemplate>
                    @if (context.IconOnly)
                    {
                        <BFUTooltipHost>
                            <ChildContent>
                                <BFUCommandBarButton IconName=@context.IconName Text=@(!context.IconOnly ? context.Text : null)
                                                     MenuItems=@context.Items
                                                  OnClick=@(args => context.OnClick?.Invoke(new ItemClickedArgs() { MouseEventArgs = args, Key = context.Key }))
                                                  Command=@context.Command CommandParameter=@context.CommandParameter
                                                  Disabled=@context.Disabled AriaLabel=@context.AriaLabel Checked=@context.Checked ClassName=@context.ClassName
                                                  Split=@context.Split Style=@context.Style />
                            </ChildContent>
                            <TooltipContent>
                                @context.Text
                            </TooltipContent>
                        </BFUTooltipHost>
                    }
                    else
                    {
                        <BFUCommandBarButton IconName=@context.IconName Text=@(!context.IconOnly ? context.Text : null)
                                             MenuItems=@context.Items
                                          OnClick=@(args => context.OnClick?.Invoke(new ItemClickedArgs() { MouseEventArgs = args, Key = context.Key }))
                                          Command=@context.Command CommandParameter=@context.CommandParameter
                                          Disabled=@context.Disabled AriaLabel=@context.AriaLabel Checked=@context.Checked ClassName=@context.ClassName
                                          Split=@context.Split Style=@context.Style />
                    }
                </ItemTemplate>

            </BFUOverflowSet>
        </div>
    </DataTemplate>
</BFUResizeGroup>